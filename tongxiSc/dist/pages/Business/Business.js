"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
// var daaty =  require("../../utils/data.js")
var daaty = require("../../utils/api2.js");
var uitil = require("../../utils/util.js");
var app = getApp();
exports.default = Page({
  data: {
    // asondata:daaty.datajsondb
    dasylist: [],
    cardList: '',
    selectIndex: 0,
    isend: false,
    path1: ['../../common/assets/tab/kca1.png', '../../common/assets/tab/akb1.png'],
    path2: ['../../common/assets/tab/844090894838752016.png', '../../common/assets/tab/dianzan_icon_default@2x.png'],
    user: ''
  },
  onClick: function onClick(e) {
    console.log("ComponentId:" + e.detail.componentId + ",you selected:" + e.detail.key);
    console.log("==================================");
  },
  acsitong: function acsitong(num, aiy) {
    var thery = this;
    var user = app.globalData.user;
    //分组
    daaty.groupList(user.userId, aiy, successFa);
    function successFa(data, sourceObj) {
      app.globalData.mygropuList = data.data;
      thery.setData({ dasylist: data.data });
    }
  },
  cardList: function cardList() {
    app.loading();
    wx.showNavigationBarLoading(); //在标题栏中显示加载
    var thery = this;
    var user = app.globalData.user;
    // console.log(user,'user')
    daaty.myCollectionList(user.userId, 0, 0, 300, null, successFa2);
    function successFa2(data, sourceObj) {
      if (data.data == 0 || data.data == null || data.data == '') {
        wx.hideLoading();
        wx.hideNavigationBarLoading(); //完成停止加载
        wx.stopPullDownRefresh(); //停止下拉刷新
        app.hideLing();
        thery.setData({ isend: true });
        return;
      }
      var length = data.data.length;
      if (length < 300) {
        thery.setData({ isend: true });
      }
      console.log(data, 'cardList');

      for (var i = 0; i < data.data.length; i++) {
        data.data[i].headImg = thery.getImg(data.data[i].fileList, data.data[i].headImg);
      }
      thery.setData({ cardList: data.data, user: user });
      wx.hideLoading();
      wx.hideNavigationBarLoading(); //完成停止加载
      wx.stopPullDownRefresh(); //停止下拉刷新
      app.hideLing();
    }
  },
  getImg: function getImg(fileList, headImg) {
    if (fileList == null || fileList == '') {
      return headImg;
    }
    for (var i = 0; i < fileList.length; i++) {
      var f = fileList[i];
      if (f.scoureType == 11) {
        headImg = app.globalData.imgUrl + f.fileUrl;
        break;
      }
    }
    return headImg;
  },
  onShow: function onShow() {
    var thery = this;
    app.checkLoginStatus();
    var mygropuList = app.globalData.mygropuList;
    console.log('mygropuList', mygropuList);
    if (mygropuList != null && mygropuList.length > 0) {
      thery.setData({ dasylist: mygropuList });
    } else {
      thery.acsitong(5, 0);
    }
    thery.cardList();
  },
  mewcwebox1: function mewcwebox1(e) {
    var indec = e.currentTarget.dataset.indec;
    var cars = e.currentTarget.dataset.cars;
    var thy = this;
    uitil.camcewr(cars, 1, indec, thy);
  },
  mewcwebox2: function mewcwebox2(e) {
    var indec = e.currentTarget.dataset.indec;
    var cars = e.currentTarget.dataset.cars;
    var thy = this;
    uitil.camcewr(cars, 2, indec, thy);
    this.setData({ binindex: indec });
  },
  aksening: function aksening() {
    wx.navigateTo({
      url: '../manage/manage'
    });
  },
  mewcwe: function mewcwe(e) {
    var uid = e.currentTarget.dataset.uids;
    // console.log(e)
    wx.navigateTo({
      url: '../details/details?uid=' + uid
    });
  },
  onReachBottom: function onReachBottom() {
    console.log(6666);
  },
  zddly: function zddly() {
    // console.log(77777)
  }
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkJ1c2luZXNzLnd4cCJdLCJuYW1lcyI6WyJkYWF0eSIsInJlcXVpcmUiLCJ1aXRpbCIsImFwcCIsImdldEFwcCIsImRhdGEiLCJkYXN5bGlzdCIsImNhcmRMaXN0Iiwic2VsZWN0SW5kZXgiLCJpc2VuZCIsInBhdGgxIiwicGF0aDIiLCJ1c2VyIiwib25DbGljayIsImUiLCJjb25zb2xlIiwibG9nIiwiZGV0YWlsIiwiY29tcG9uZW50SWQiLCJrZXkiLCJhY3NpdG9uZyIsIm51bSIsImFpeSIsInRoZXJ5IiwiZ2xvYmFsRGF0YSIsImdyb3VwTGlzdCIsInVzZXJJZCIsInN1Y2Nlc3NGYSIsInNvdXJjZU9iaiIsIm15Z3JvcHVMaXN0Iiwic2V0RGF0YSIsImxvYWRpbmciLCJ3eCIsInNob3dOYXZpZ2F0aW9uQmFyTG9hZGluZyIsIm15Q29sbGVjdGlvbkxpc3QiLCJzdWNjZXNzRmEyIiwiaGlkZUxvYWRpbmciLCJoaWRlTmF2aWdhdGlvbkJhckxvYWRpbmciLCJzdG9wUHVsbERvd25SZWZyZXNoIiwiaGlkZUxpbmciLCJsZW5ndGgiLCJpIiwiaGVhZEltZyIsImdldEltZyIsImZpbGVMaXN0IiwiZiIsInNjb3VyZVR5cGUiLCJpbWdVcmwiLCJmaWxlVXJsIiwib25TaG93IiwiY2hlY2tMb2dpblN0YXR1cyIsIm1ld2N3ZWJveDEiLCJpbmRlYyIsImN1cnJlbnRUYXJnZXQiLCJkYXRhc2V0IiwiY2FycyIsInRoeSIsImNhbWNld3IiLCJtZXdjd2Vib3gyIiwiYmluaW5kZXgiLCJha3NlbmluZyIsIm5hdmlnYXRlVG8iLCJ1cmwiLCJtZXdjd2UiLCJ1aWQiLCJ1aWRzIiwib25SZWFjaEJvdHRvbSIsInpkZGx5Il0sIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQ0EsSUFBSUEsUUFBU0MsUUFBUSxxQkFBUixDQUFiO0FBQ0EsSUFBSUMsUUFBUUQsUUFBUSxxQkFBUixDQUFaO0FBQ0EsSUFBSUUsTUFBTUMsUUFBVjs7QUFZRUMsUUFBTTtBQUNKO0FBQ0FDLGNBQVMs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UUFBUXRDLEVBQUV1QyxhQUFGLENBQWdCQyxPQUFoQixDQUF3QkYsS0FBcEM7QUFDQSxRQUFJRyxPQUFPekMsRUFBRXVDLGFBQUYsQ0FBZ0JDLE9BQWhCLENBQXdCQyxJQUFuQztBQUNBLFFBQUlDLE1BQU0sSUFBVjtBQUNBdEQsVUFBTXVELE9BQU4sQ0FBY0YsSUFBZCxFQUFtQixDQUFuQixFQUFxQkgsS0FBckIsRUFBMkJJLEdBQTNCO0FBQ0EsU0FBSzFCLE9BQUwsQ0FBYSxFQUFDNkIsVUFBU1AsS0FBVixFQUFiO0FBQ0wsRztBQUNEUSxZQUFTLG9CQUFVO0FBQ2pCNUIsT0FBRzZCLFVBQUgsQ0FBYztBQUNaQyxXQUFJO0FBRFEsS0FBZDtBQUdELEc7QUFDREMsVUFBTyxnQkFBU2pELENBQVQsRUFBVztBQUNoQixRQUFJa0QsTUFBTWxELEVBQUV1QyxhQUFGLENBQWdCQyxPQUFoQixDQUF3QlcsSUFBbEM7QUFDQTtBQUNBakMsT0FBRzZCLFVBQUgsQ0FBYztBQUNaQyxXQUFJLDRCQUEwQkU7QUFEbEIsS0FBZDtBQUdELEc7QUFDREUsaUJBQWMseUJBQVU7QUFDdEJuRCxZQUFRQyxHQUFSLENBQVksSUFBWjtBQUNELEc7QUFDRG1ELFNBQU0saUJBQVU7QUFDZDtBQUNEIiwiZmlsZSI6IkJ1c2luZXNzLnd4cCIsInNvdXJjZXNDb250ZW50IjpbIi8vIHZhciBkYWF0eSA9ICByZXF1aXJlKFwiLi4vLi4vdXRpbHMvZGF0YS5qc1wiKVxudmFyIGRhYXR5ID0gIHJlcXVpcmUoXCIuLi8uLi91dGlscy9hcGkyLmpzXCIpXG52YXIgdWl0aWwgPSByZXF1aXJlKFwiLi4vLi4vdXRpbHMvdXRpbC5qc1wiKVxudmFyIGFwcCA9IGdldEFwcCgpO1xuZXhwb3J0IGRlZmF1bHQge1xuICBjb25maWc6IHtcbiAgICBuYXZpZ2F0aW9uQmFyVGl0bGVUZXh0OiAn5ZCN54mH5aS5JyxcbiAgICB1c2luZ0NvbXBvbmVudHM6IHtcbiAgICAgICd3eGMtdGFiJzogJ0BtaW51aS93eGMtdGFiJyxcbiAgICAgICd3eGMtdGFiLXBhbmVsJzogJ0BtaW51aS93eGMtdGFiL3BhbmVsJyxcbiAgICAgICd3eGMtbG9hZG1vcmUnOiAnQG1pbnVpL3d4Yy1sb2FkbW9yZScsXG4gICAgICAnd3hjLWljb24nOiAnQG1pbnVpL3d4Yy1pY29uJyxcbiAgICAgICd3eGMtc2VhcmNoJzogJ0BtaW51aS93eGMtc2VhcmNoJ1xuICAgIH1cbiAgfSxcbiAgZGF0YToge1xuICAgIC8vIGFzb25kYXRhOmRhYXR5LmRhdGFqc29uZGJcbiAgICBkYXN5bGlzdDpbXSxcbiAgICBjYXJkTGlzdDonJyxcbiAgICBzZWxlY3RJbmRleDowLFxuICAgIGlzZW5kOmZhbHNlLFxuICAgIHBhdGgxOlsnLi4vLi4vY29tbW9uL2Fzc2V0cy90YWIva2NhMS5wbmcnLCcuLi8uLi9jb21tb24vYXNzZXRzL3RhYi9ha2IxLnBuZyddLFxuICAgIHBhdGgyOlsnLi4vLi4vY29tbW9uL2Fzc2V0cy90YWIvODQ0MDkwODk0ODM4NzUyMDE2LnBuZycsJy4uLy4uL2NvbW1vbi9hc3NldHMvdGFiL2RpYW56YW5faWNvbl9kZWZhdWx0QDJ4LnBuZyddLFxuICAgIHVzZXI6JydcbiAgfSxcbiAgb25DbGljazogZnVuY3Rpb24oZSkge1xuICAgICAgY29uc29sZS5sb2coYENvbXBvbmVudElkOiR7ZS5kZXRhaWwuY29tcG9uZW50SWR9LHlvdSBzZWxlY3RlZDoke2UuZGV0YWlsLmtleX1gKTtcbiAgICAgIGNvbnNvbGUubG9nKGA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09YCk7XG4gIH0sXG4gIGFjc2l0b25nOmZ1bmN0aW9uKG51bSxhaXkpe1xuICAgICAgIHZhciB0aGVyeSA9IHRoaXNcbiAgICAgIHZhciB1c2VyPWFwcC5nbG9iYWxEYXRhLnVzZXI7XG4gICAgICAgLy/liIbnu4RcbiAgICAgICBkYWF0eS5ncm91cExpc3QodXNlci51c2VySWQsYWl5LHN1Y2Nlc3NGYSlcbiAgICAgICBmdW5jdGlvbiBzdWNjZXNzRmEoZGF0YSwgc291cmNlT2JqKXtcbiAgICAgICAgYXBwLmdsb2JhbERhdGEubXlncm9wdUxpc3Q9ZGF0YS5kYXRhXG4gICAgICAgIHRoZXJ5LnNldERhdGEoe2Rhc3lsaXN0OmRhdGEuZGF0YX0pXG4gICAgICAgXG4gICAgICAgfVxuICAgICAgXG4gIH0sXG4gIGNhcmRMaXN0OmZ1bmN0aW9uKCl7XG4gICAgIGFwcC5sb2FkaW5nKCk7XG4gICAgICB3eC5zaG93TmF2aWdhdGlvbkJhckxvYWRpbmcoKSAvL+WcqOagh+mimOagj+S4reaYvuekuuWKoOi9vVxuICAgICAgdmFyIHRoZXJ5ID0gdGhpc1xuICAgICAgdmFyIHVzZXI9YXBwLmdsb2JhbERhdGEudXNlcjtcbiAgICAgIC8vIGNvbnNvbGUubG9nKHVzZXIsJ3VzZXInKVxuICAgICAgZGFhdHkubXlDb2xsZWN0aW9uTGlzdCh1c2VyLnVzZXJJZCwwLDAsMzAwLG51bGwsc3VjY2Vzc0ZhMik7XG4gICAgICBmdW5jdGlvbiBzdWNjZXNzRmEyKGRhdGEsIHNvdXJjZU9iail7XG4gICAgICAgIGlmKGRhdGEuZGF0YT09MHx8ZGF0YS5kYXRhPT1udWxsfHxkYXRhLmRhdGE9PScnKXtcbiAgICAgICAgICB3eC5oaWRlTG9hZGluZygpO1xuICAgICAgICAgIHd4LmhpZGVOYXZpZ2F0aW9uQmFyTG9hZGluZygpIC8v5a6M5oiQ5YGc5q2i5Yqg6L29XG4gICAgICAgICAgd3guc3RvcFB1bGxEb3duUmVmcmVzaCgpIC8v5YGc5q2i5LiL5ouJ5Yi35pawXG4gICAgICAgICAgYXBwLmhpZGVMaW5nKCk7XG4gICAgICAgICAgdGhlcnkuc2V0RGF0YSh7aXNlbmQ6dHJ1ZX0pXG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgbGV0IGxlbmd0aD1kYXRhLmRhdGEubGVuZ3RoO1xuICAgICAgICBpZihsZW5ndGg8MzAwKXtcbiAgICAgICAgICB0aGVyeS5zZXREYXRhKHtpc2VuZDp0cnVlfSlcbiAgICAgICAgfVxuICAgICAgICBjb25zb2xlLmxvZyhkYXRhLCdjYXJkTGlzdCcpXG5cbiAgICAgICAgXG4gICAgICAgIGZvcih2YXIgaT0wO2k8ZGF0YS5kYXRhLmxlbmd0aDtpKyspe1xuICAgICAgICAgIGRhdGEuZGF0YVtpXS5oZWFkSW1nPXRoZXJ5LmdldEltZyhkYXRhLmRhdGFbaV0uZmlsZUxpc3QsZGF0YS5kYXRhW2ldLmhlYWRJbWcpO1xuICAgICAgICB9XG4gICAgICAgIHRoZXJ5LnNldERhdGEoe2NhcmRMaXN0OmRhdGEuZGF0YSx1c2VyOnVzZXJ9KVxuICAgICAgICB3eC5oaWRlTG9hZGluZygpO1xuICAgICAgICB3eC5oaWRlTmF2aWdhdGlvbkJhckxvYWRpbmcoKSAvL+WujOaIkOWBnOatouWKoOi9vVxuICAgICAgICB3eC5zdG9wUHVsbERvd25SZWZyZXNoKCkgLy/lgZzmraLkuIvmi4nliLfmlrBcbiAgICAgICAgYXBwLmhpZGVMaW5nKCk7XG4gICAgICB9XG4gIH0sXG4gIGdldEltZzpmdW5jdGlvbihmaWxlTGlzdCxoZWFkSW1nKXtcbiAgICBpZihmaWxlTGlzdD09bnVsbHx8ZmlsZUxpc3Q9PScnKXtcbiAgICAgIHJldHVybiBoZWFkSW1nO1xuICAgIH1cbiAgICBmb3IodmFyIGk9MDtpPGZpbGVMaXN0Lmxlbmd0aDtpKyspe1xuICAgICAgbGV0IGY9ZmlsZUxpc3RbaV07XG4gICAgICBpZihmLnNjb3VyZVR5cGU9PTExKXtcbiAgICAgICAgaGVhZEltZz1hcHAuZ2xvYmFsRGF0YS5pbWdVcmwrZi5maWxlVXJsO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGhlYWRJbWc7XG4gIH0sXG4gIG9uU2hvdzpmdW5jdGlvbigpe1xuICAgIHZhciB0aGVyeSA9IHRoaXNcbiAgICBhcHAuY2hlY2tMb2dpblN0YXR1cygpO1xuICAgIHZhciBteWdyb3B1TGlzdD1hcHAuZ2xvYmFsRGF0YS5teWdyb3B1TGlzdDtcbiAgICBjb25zb2xlLmxvZygnbXlncm9wdUxpc3QnLG15Z3JvcHVMaXN0KTtcbiAgICBpZihteWdyb3B1TGlzdCE9bnVsbCYmbXlncm9wdUxpc3QubGVuZ3RoPjApe1xuICAgICAgdGhlcnkuc2V0RGF0YSh7ZGFzeWxpc3Q6bXlncm9wdUxpc3R9KVxuICAgIH1lbHNle1xuICAgICAgdGhlcnkuYWNzaXRvbmcoNSwwKVxuICAgIH1cbiAgICB0aGVyeS5jYXJkTGlzdCgpO1xuICB9LFxuICBtZXdjd2Vib3gxOmZ1bmN0aW9uKGUpe1xuICAgIHZhciBpbmRlYyA9IGUuY3VycmVudFRhcmdldC5kYXRhc2V0LmluZGVjXG4gICAgdmFyIGNhcnMgPSBlLmN1cnJlbnRUYXJnZXQuZGF0YXNldC5jYXJzXG4gICAgdmFyIHRoeSA9IHRoaXNcbiAgICB1aXRpbC5jYW1jZXdyKGNhcnMsMSxpbmRlYyx0aHkpXG4gIH0sXG4gIG1ld2N3ZWJveDI6ZnVuY3Rpb24oZSl7XG4gICAgICAgIHZhciBpbmRlYyA9IGUuY3VycmVudFRhcmdldC5kYXRhc2V0LmluZGVjXG4gICAgICAgIHZhciBjYXJzID0gZS5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuY2Fyc1xuICAgICAgICB2YXIgdGh5ID0gdGhpc1xuICAgICAgICB1aXRpbC5jYW1jZXdyKGNhcnMsMixpbmRlYyx0aHkpXG4gICAgICAgIHRoaXMuc2V0RGF0YSh7YmluaW5kZXg6aW5kZWN9KVxuICB9LFxuICBha3NlbmluZzpmdW5jdGlvbigpe1xuICAgIHd4Lm5hdmlnYXRlVG8oe1xuICAgICAgdXJsOicuLi9tYW5hZ2UvbWFuYWdlJ1xuICAgIH0pXG4gIH0sXG4gIG1ld2N3ZTpmdW5jdGlvbihlKXtcbiAgICB2YXIgdWlkID0gZS5jdXJyZW50VGFyZ2V0LmRhdGFzZXQudWlkc1xuICAgIC8vIGNvbnNvbGUubG9nKGUpXG4gICAgd3gubmF2aWdhdGVUbyh7XG4gICAgICB1cmw6Jy4uL2RldGFpbHMvZGV0YWlscz91aWQ9Jyt1aWRcbiAgICB9KVxuICB9LFxuICBvblJlYWNoQm90dG9tOmZ1bmN0aW9uKCl7XG4gICAgY29uc29sZS5sb2coNjY2NilcbiAgfSxcbiAgemRkbHk6ZnVuY3Rpb24oKXtcbiAgICAvLyBjb25zb2xlLmxvZyg3Nzc3NylcbiAgfVxufSJdfQ==