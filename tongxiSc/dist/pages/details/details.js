"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
var app = getApp();
var daaty = require("../../utils/api2.js");
var navigator = require("../../utils/navigator.js");
var tip = require("../../utils/tip.js");
var util = require("../../utils/util.js");
exports.default = Page({
  data: {
    sloabloState: '',
    diong: true,
    user: ''
  },
  onLoad: function onLoad(options) {
    console.log(options, 'opyin');
    var type = decodeURIComponent(options.uid);
    var strylist = app.globalData.strylist;
    var theryy = this;
    var imglis;
    var formUserId;
    app.globalData.newDataObj.state = false;
    app.checkLoginStatus();
    formUserId = app.globalData.user.userId;
    daaty.cardDetails(formUserId, type, null, successFa);
    function successFa(data, sourceObj) {
      // console.log(formUserId,data.data.userId)
      if (formUserId != data.data.userId) {
        theryy.setData({ diong: false });
      }
      imglis = data.data.fileList;
      for (var i = 0; i < imglis.length; i++) {
        if (imglis[i].scoureType == 11) {
          theryy.setData({ typeimg: imglis[i].fileUrl });
          break;
        }
      }

      if (strylist != undefined) {
        for (var i = 0; i < strylist.length; i++) {
          if (strylist[i].uid == data.data.industryId) {
            theryy.setData({ stry: strylist[i].name });
            break;
          }
        }
      }

      theryy.setData({ sloabloState: data.data, url: app.globalData.imgUrl, user: app.globalData.user, index: options.index });
    }
  },
  aclosey: function aclosey() {
    var param = { type: 1, imgsy: this.data.typeimg, index: this.data.index };
    navigator.navigateTo('../editor/editor', param);
  },
  aldelete: function aldelete() {
    tip.showModalcencll("确认删除", '确认删除这张名片', funyy);
    var thisf = this;
    function funyy(res) {
      if (res.confirm == true) {
        var successFa = function successFa(data, sourceObj) {};

        daaty.delMyCard(app.globalData.dataObj.userId, app.globalData.dataObj.uid, null, successFa);

        console.log(thisf.data.index, 2222222);
        app.globalData.bchage = false;
        app.globalData.newDataObj.steaindex = thisf.data.index;
        tip.showToast("删除成功");
        setTimeout(function () {
          navigator.switchTab('../nameCar/nameCar');
        }, 1500);
      }
    }
  },
  imgYu: function imgYu(event) {
    var src = event.currentTarget.dataset.src; //获取data-src
    var imgList = event.currentTarget.dataset.list; //获取data-list
    for (var i = 0; i < imgList.length; i++) {
      imgList[i] = app.globalData.imgUrl + imgList[i].fileUrl;
    }
    //图片预览
    wx.previewImage({
      current: src, // 当前显示图片的http链接
      urls: imgList // 需要预览的图片http链接列表
    });
  },
  decans: function decans(e) {
    //点赞
    var carsid = e.currentTarget.dataset.cars;
    var thy = this;
    util.camcewr(carsid, 2, "a", thy);
  },
  wler: function wler(e) {
    //收藏
    var carsid = e.currentTarget.dataset.cars;
    var thy = this;
    util.camcewr(carsid, 1, "a", thy);
  },
  onShareAppMessage: function onShareAppMessage(e) {
    var uids = this.data.sloabloState.uid;
    var formUserId = this.data.user.userId;
    var narme = this.data.sloabloState.name;
    var time = app.globalData.imgUrl + '/upload/card/user/' + uids + '.jpg?' + new Date().getTime();
    return {
      title: '这是我的[' + narme + ']电子名片,望惠存',
      // desc: '分享页面的内容',
      imageUrl: time,
      path: 'pages/details/details?uid=' + uids, // 路径，传递参数到指定页面。
      // path: '/pages/reel/reel',
      success: function success(res) {
        console.log("转发成功", res);
        daaty.operationList(formUserId, uids, null, successFa);
        function successFa(data, sourceObj) {}
      },
      fail: function fail(res) {
        console.log("转发失败", res);
      }
    };
  }
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRldGFpbHMud3hwIl0sIm5hbWVzIjpbImFwcCIsImdldEFwcCIsImRhYXR5IiwicmVxdWlyZSIsIm5hdmlnYXRvciIsInRpcCIsInV0aWwiLCJkYXRhIiwic2xvYWJsb1N0YXRlIiwiZGlvbmciLCJ1c2VyIiwib25Mb2FkIiwib3B0aW9ucyIsImNvbnNvbGUiLCJsb2ciLCJ0eXBlIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwidWlkIiwic3RyeWxpc3QiLCJnbG9iYWxEYXRhIiwidGhlcnl5IiwiaW1nbGlzIiwiZm9ybVVzZXJJZCIsIm5ld0RhdGFPYmoiLCJzdGF0ZSIsImNoZWNrTG9naW5TdGF0dXMiLCJ1c2VySWQiLCJjYXJkRGV0YWlscyIsInN1Y2Nlc3NGYSIsInNvdXJjZU9iaiIsInNldERhdGEiLCJmaWxlTGlzdCIsImkiLCJsZW5ndGgiLCJzY291cmVUeXBlIiwidHlwZWltZyIsImZpbGVVcmwiLCJ1bmRlZmluZWQiLCJpbmR1c3RyeUlkIiwic3RyeSIsIm5hbWUiLCJ1cmwiLCJpbWdVcmwiLCJpbmRleCIsImFjbG9zZXkiLCJwYXJhbSIsImltZ3N5IiwibmF2aWdhdGVUbyIsImFsZGVsZXRlIiwic2hvd01vZGFsY2VuY2xsIiwiZnVueXkiLCJ0aGlzZiIsInJlcyIsImNvbmZpcm0iLCJkZWxNeUNhcmQiLCJkYXRhT2JqIiwiYmNoYWdlIiwic3RlYWluZGV4Iiwic2hvd1RvYXN0Iiwic2V0VGltZW91dCIsInN3aXRjaFRhYiIsImltZ1l1IiwiZXZlbnQiLCJzcmMiLCJjdXJyZW50VGFyZ2V0IiwiZGF0YXNldCIsImltZ0xpc3QiLCJsaXN0Iiwid3giLCJwcmV2aWV3SW1hZ2UiLCJjdXJyZW50IiwidXJscyIsImRlY2FucyIsImUiLCJjYXJzaWQiLCJjYXJzIiwidGh5IiwiY2FtY2V3ciIsIndsZXIiLCJvblNoYXJlQXBwTWVzc2FnZSIsInVpZHMiLCJuYXJtZSIsInRpbWUiLCJEYXRlIiwiZ2V0VGltZSIsInRpdGxlIiwiaW1hZ2VVcmwiLCJwYXRo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QUFvQnNDLEdBQXBCO0FBQ0VsRCxjQUFNdUYsYUFBTixDQUFvQm5FLFVBQXBCLEVBQStCMEQsSUFBL0IsRUFBb0MsSUFBcEMsRUFBeUNwRCxTQUF6QztBQUNBLGlCQUFTQSxTQUFULENBQW1CckIsSUFBbkIsRUFBeUJzQixTQUF6QixFQUFtQyxDQUNsQztBQUNGLE9BWEY7QUFZQzZELFlBQU0sY0FBQ3RDLEdBQUQsRUFBUztBQUNmdkMsZ0JBQVFDLEdBQVIsQ0FBWSxNQUFaLEVBQW9Cc0MsR0FBcEI7QUFDQztBQWRGLEtBQVA7QUFnQkgiLCJmaWxlIjoiZGV0YWlscy53eHAiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgYXBwID0gZ2V0QXBwKCk7XG4gIHZhciBkYWF0eSA9ICByZXF1aXJlKFwiLi4vLi4vdXRpbHMvYXBpMi5qc1wiKVxuICB2YXIgbmF2aWdhdG9yID0gIHJlcXVpcmUoXCIuLi8uLi91dGlscy9uYXZpZ2F0b3IuanNcIilcbiAgdmFyIHRpcCA9IHJlcXVpcmUoXCIuLi8uLi91dGlscy90aXAuanNcIilcbiAgdmFyIHV0aWwgPSByZXF1aXJlKFwiLi4vLi4vdXRpbHMvdXRpbC5qc1wiKVxuZXhwb3J0IGRlZmF1bHQge1xuICBjb25maWc6IHtcbiAgICBuYXZpZ2F0aW9uQmFyVGl0bGVUZXh0OiAn5ZCN54mH6K+m5oOFJyxcbiAgICB1c2luZ0NvbXBvbmVudHM6IHt9XG4gIH0sXG4gIGRhdGE6IHtcbiAgICBzbG9hYmxvU3RhdGU6JycsXG4gICAgZGlvbmc6dHJ1ZSxcbiAgICB1c2VyOicnXG4gIH0sXG4gIG9uTG9hZDpmdW5jdGlvbihvcHRpb25zKXtcbiAgICBjb25zb2xlLmxvZyhvcHRpb25zLCdvcHlpbicpXG4gICAgdmFyIHR5cGUgPSBkZWNvZGVVUklDb21wb25lbnQob3B0aW9ucy51aWQpXG4gICAgdmFyIHN0cnlsaXN0ID0gYXBwLmdsb2JhbERhdGEuc3RyeWxpc3Q7XG4gICAgdmFyIHRoZXJ5eSA9IHRoaXM7XG4gICAgdmFyIGltZ2xpcztcbiAgICB2YXIgZm9ybVVzZXJJZDtcbiAgICBhcHAuZ2xvYmFsRGF0YS5uZXdEYXRhT2JqLnN0YXRlID0gZmFsc2VcbiAgICBhcHAuY2hlY2tMb2dpblN0YXR1cygpO1xuICAgIGZvcm1Vc2VySWQgPSBhcHAuZ2xvYmFsRGF0YS51c2VyLnVzZXJJZFxuICAgICBkYWF0eS5jYXJkRGV0YWlscyhmb3JtVXNlcklkLHR5cGUsbnVsbCxzdWNjZXNzRmEpXG4gICAgICAgZnVuY3Rpb24gc3VjY2Vzc0ZhKGRhdGEsIHNvdXJjZU9iail7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhmb3JtVXNlcklkLGRhdGEuZGF0YS51c2VySWQpXG4gICAgICAgICAgICBpZihmb3JtVXNlcklkICE9IGRhdGEuZGF0YS51c2VySWQpe1xuICAgICAgICAgICAgICAgIHRoZXJ5eS5zZXREYXRhKHtkaW9uZzpmYWxzZX0pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgaW1nbGlzID0gZGF0YS5kYXRhLmZpbGVMaXN0XG4gICAgICAgICAgICAgIGZvcih2YXIgaT0wO2k8aW1nbGlzLmxlbmd0aDtpKyspe1xuICAgICAgICAgICAgICAgICAgICBpZihpbWdsaXNbaV0uc2NvdXJlVHlwZSA9PSAxMSl7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGVyeXkuc2V0RGF0YSh7dHlwZWltZzppbWdsaXNbaV0uZmlsZVVybH0pXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYoc3RyeWxpc3QgIT0gdW5kZWZpbmVkKXtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHJ5bGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3RyeWxpc3RbaV0udWlkID09IGRhdGEuZGF0YS5pbmR1c3RyeUlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGVyeXkuc2V0RGF0YSh7IHN0cnk6IHN0cnlsaXN0W2ldLm5hbWUgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICB0aGVyeXkuc2V0RGF0YSh7c2xvYWJsb1N0YXRlOmRhdGEuZGF0YSx1cmw6YXBwLmdsb2JhbERhdGEuaW1nVXJsLHVzZXI6YXBwLmdsb2JhbERhdGEudXNlcixpbmRleDpvcHRpb25zLmluZGV4fSlcbiAgICAgICAgICAgfVxuICAgXG4gIH0sXG4gIGFjbG9zZXk6ZnVuY3Rpb24oKXtcbiAgICB2YXIgcGFyYW09e3R5cGU6MSxpbWdzeTp0aGlzLmRhdGEudHlwZWltZyxpbmRleDp0aGlzLmRhdGEuaW5kZXh9O1xuICAgICAgbmF2aWdhdG9yLm5hdmlnYXRlVG8oJy4uL2VkaXRvci9lZGl0b3InLHBhcmFtKTtcbiAgfSxcbiAgYWxkZWxldGU6ZnVuY3Rpb24oKXtcbiAgICAgICB0aXAuc2hvd01vZGFsY2VuY2xsKFwi56Gu6K6k5Yig6ZmkXCIsJ+ehruiupOWIoOmZpOi/meW8oOWQjeeJhycsZnVueXkpXG4gICAgICAgdmFyIHRoaXNmID0gdGhpc1xuICAgICAgIGZ1bmN0aW9uIGZ1bnl5KHJlcyl7XG4gICAgICAgICAgIGlmKHJlcy5jb25maXJtID09IHRydWUpe1xuICAgICAgICAgICAgICAgIGRhYXR5LmRlbE15Q2FyZChhcHAuZ2xvYmFsRGF0YS5kYXRhT2JqLnVzZXJJZCxhcHAuZ2xvYmFsRGF0YS5kYXRhT2JqLnVpZCxudWxsLHN1Y2Nlc3NGYSlcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gc3VjY2Vzc0ZhKGRhdGEsIHNvdXJjZU9iail7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2codGhpc2YuZGF0YS5pbmRleCwyMjIyMjIyKVxuICAgICAgICAgICAgICAgIGFwcC5nbG9iYWxEYXRhLmJjaGFnZSA9IGZhbHNlXG4gICAgICAgICAgICAgICAgYXBwLmdsb2JhbERhdGEubmV3RGF0YU9iai5zdGVhaW5kZXggPSB0aGlzZi5kYXRhLmluZGV4XG4gICAgICAgICAgICAgICAgdGlwLnNob3dUb2FzdChcIuWIoOmZpOaIkOWKn1wiKVxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgbmF2aWdhdG9yLnN3aXRjaFRhYignLi4vbmFtZUNhci9uYW1lQ2FyJylcbiAgICAgICAgICAgICAgICB9LDE1MDApXG4gICAgICAgICAgIH1cbiAgICAgICB9XG4gIH0sXG4gIGltZ1l1OmZ1bmN0aW9uKGV2ZW50KXtcbiAgICAgICAgdmFyIHNyYyA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5zcmM7Ly/ojrflj5ZkYXRhLXNyY1xuICAgICAgICB2YXIgaW1nTGlzdCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5saXN0Oy8v6I635Y+WZGF0YS1saXN0XG4gICAgICAgIGZvcih2YXIgaT0wO2k8aW1nTGlzdC5sZW5ndGg7aSsrKXtcbiAgICAgICAgaW1nTGlzdFtpXT1hcHAuZ2xvYmFsRGF0YS5pbWdVcmwraW1nTGlzdFtpXS5maWxlVXJsO1xuICAgICAgICB9XG4gICAgICAgIC8v5Zu+54mH6aKE6KeIXG4gICAgICAgIHd4LnByZXZpZXdJbWFnZSh7XG4gICAgICAgIGN1cnJlbnQ6IHNyYywgLy8g5b2T5YmN5pi+56S65Zu+54mH55qEaHR0cOmTvuaOpVxuICAgICAgICB1cmxzOiBpbWdMaXN0IC8vIOmcgOimgemihOiniOeahOWbvueJh2h0dHDpk77mjqXliJfooahcbiAgICAgICAgfSlcbiAgIH0sXG4gICBkZWNhbnM6ZnVuY3Rpb24oZSl7ICAvL+eCuei1nlxuICAgICAgbGV0IGNhcnNpZCA9IGUuY3VycmVudFRhcmdldC5kYXRhc2V0LmNhcnNcbiAgICAgIHZhciB0aHkgPSB0aGlzXG4gICAgICB1dGlsLmNhbWNld3IoY2Fyc2lkLDIsXCJhXCIsdGh5KVxuICAgfSxcbiAgIHdsZXI6ZnVuY3Rpb24oZSl7ICAvL+aUtuiXj1xuICAgICAgbGV0IGNhcnNpZCA9IGUuY3VycmVudFRhcmdldC5kYXRhc2V0LmNhcnNcbiAgICAgIHZhciB0aHkgPSB0aGlzXG4gICAgICB1dGlsLmNhbWNld3IoY2Fyc2lkLDEsXCJhXCIsdGh5KVxuICAgfSxcbiAgIG9uU2hhcmVBcHBNZXNzYWdlOiBmdW5jdGlvbiAoZSkge1xuICAgICAgdmFyIHVpZHMgPSB0aGlzLmRhdGEuc2xvYWJsb1N0YXRlLnVpZFxuICAgICAgdmFyIGZvcm1Vc2VySWQgPSB0aGlzLmRhdGEudXNlci51c2VySWRcbiAgICAgIHZhciBuYXJtZSA9IHRoaXMuZGF0YS5zbG9hYmxvU3RhdGUubmFtZVxuICAgICAgdmFyIHRpbWUgPSBhcHAuZ2xvYmFsRGF0YS5pbWdVcmwrJy91cGxvYWQvY2FyZC91c2VyLycrdWlkcysnLmpwZz8nK25ldyBEYXRlKCkuZ2V0VGltZSgpXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0aXRsZTogJ+i/meaYr+aIkeeahFsnK25hcm1lKydd55S15a2Q5ZCN54mHLOacm+aDoOWtmCcsXG4gICAgICAgICAgICAvLyBkZXNjOiAn5YiG5Lqr6aG16Z2i55qE5YaF5a65JyxcbiAgICAgICAgICAgIGltYWdlVXJsOnRpbWUsXG4gICAgICAgICAgICBwYXRoOiAncGFnZXMvZGV0YWlscy9kZXRhaWxzP3VpZD0nK3VpZHMsLy8g6Lev5b6E77yM5Lyg6YCS5Y+C5pWw5Yiw5oyH5a6a6aG16Z2i44CCXG4gICAgICAgICAgICAvLyBwYXRoOiAnL3BhZ2VzL3JlZWwvcmVlbCcsXG4gICAgICAgICAgICAgICAgc3VjY2VzczogKHJlcykgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi6L2s5Y+R5oiQ5YqfXCIsIHJlcyk7XG4gICAgICAgICAgICAgICAgICBkYWF0eS5vcGVyYXRpb25MaXN0KGZvcm1Vc2VySWQsdWlkcyxudWxsLHN1Y2Nlc3NGYSlcbiAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHN1Y2Nlc3NGYShkYXRhLCBzb3VyY2VPYmope1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZmFpbDogKHJlcykgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi6L2s5Y+R5aSx6LSlXCIsIHJlcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSBcbn0iXX0=