"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
var pathds = require("../../utils/navigator.js");
var app = getApp();
var daaty = require("../../utils/api2.js");
exports.default = Page({
  data: {
    addressList: []
  },
  onLoad: function onLoad(options) {
    // 页面初始化 options为页面跳转所带来的参数
    // console.log(options.userId,"userId")
    this.setData({
      userId: options.userId
      // userId:"5d47tnds8v10084408510086936"
    });
  },
  onReady: function onReady() {
    // 页面渲染完成
  },
  onShow: function onShow() {
    // 页面显示
    this.getAddressList();
  },
  getAddressList: function getAddressList() {
    var that = this;
    daaty.AddressListL(null, successFay);
    function successFay(res, sourceObj) {
      that.setData({
        addressList: res.data
      });
    }
  },
  addressAddOrUpdate: function addressAddOrUpdate(event) {
    // console.log(event)
    var that = this;
    //返回之前，先取出上一页对象，并设置addressId
    var pages = getCurrentPages();
    var prevPage = pages[pages.length - 2];
    console.log(prevPage);
    if (prevPage != undefined && prevPage.route == "pages/checkout/checkout") {
      try {
        wx.setStorageSync('addressId', event.currentTarget.dataset.addressId);
      } catch (e) {}

      wx.navigateBack();
    } else {
      wx.navigateTo({
        url: '../addressAdd/addressAdd?id=' + event.currentTarget.dataset.addressId + "&userId=" + that.data.userId
      });
    }
  },

  newAddressAddOrUpdate: function newAddressAddOrUpdate(event) {
    var that = this;
    wx.navigateTo({
      url: '../addressAdd/addressAdd?id=' + event.currentTarget.dataset.addressId + "&userId=" + that.data.userId
    });
  },
  deleteAddress: function deleteAddress(event) {
    var that = this;
    wx.showModal({
      title: '',
      content: '确定要删除地址？',
      success: function success(res) {
        if (res.confirm) {
          //  console.log(11112222)
          var successFay = function successFay(res, sourceObj) {};

          var addressId = event.target.dataset.addressId;
          daaty.AddressDelete(addressId, successFay);
          that.getAddressList();
          wx.removeStorage({
            key: 'addressId'
          });
        }
      }
    });
    return false;
  },

  onHide: function onHide() {
    // 页面隐藏
  },
  onUnload: function onUnload() {
    // 页面关闭
  }
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFkZHJlc3Mud3hwIl0sIm5hbWVzIjpbInBhdGhkcyIsInJlcXVpcmUiLCJhcHAiLCJnZXRBcHAiLCJkYWF0eSIsImRhdGEiLCJhZGRyZXNzTGlzdCIsIm9uTG9hZCIsIm9wdGlvbnMiLCJzZXREYXRhIiwidXNlcklkIiwib25SZWFkeSIsIm9uU2hvdyIsImdldEFkZHJlc3NMaXN0IiwidGhhdCIsIkFkZHJlc3NMaXN0TCIsInN1Y2Nlc3NGYXkiLCJyZXMiLCJzb3VyY2VPYmoiLCJhZGRyZXNzQWRkT3JVcGRhdGUiLCJldmVudCIsInBhZ2VzIiwiZ2V0Q3VycmVudFBhZ2VzIiwicHJldlBhZ2UiLCJsZW5ndGgiLCJjb25zb2xlIiwibG9nIiwidW5kZWZpbmVkIiwicm91dGUiLCJ3eCIsInNldFN0b3JhZ2VTeW5jIiwiY3VycmVudFRhcmdldCIsImRhdGFzZXQiLCJhZGRyZXNzSWQiLCJlIiwibmF2aWdhdGVCYWNrIiwibmF2aWdhdGVUbyIsInVybCIsIm5ld0FkZHJlc3NBZGRPclVwZGF0ZSIsImRlbGV0ZUFkZHJlc3MiLCJzaG93TW9kYWwiLCJ0aXRsZSIsImNvbnRlbnQiLCJzdWNjZXNzIiwiY29uZmlybSIsInRhcmdldCIsIkFkZHJlc3NEZWxldGUiLCJyZW1vdmVTdG9yYWdlIiwia2V5Iiwib25IaWRlIiwib25VbmxvYWQiXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsSUFBSUEsU0FBVUMsUUFBUSwwQkFBUixDQUFkO0FBQ0EsSUFBSUMsTUFBTUMsUUFBVjtBQUNBLElBQUlDLFFBQVNILFFBQVEscUJBQVIsQ0FBYjs7QUFNRUksUUFBTTtBQUNKQyxpQkFBYTtBQURULEc7QUFHTkMsVUFBUSxnQkFBVUMsT0FBVixFQUFtQjtBQUN6QjtBQUNBO0FBQ0EsU0FBS0MsT0FBTCxDQUFhO0FBQ1hDLGNBQU9GLFFBQVFFO0FBQ2Y7QUFGVyxLQUFiO0FBSUQsRztBQUNEQyxXQUFTLG1CQUFZO0FBQ25CO0FBQ0QsRztBQUNEQyxVQUFRLGtCQUFZO0FBQ2xCO0FBQ0EsU0FBS0MsY0FBTDtBQUNELEc7QUFDREEsZ0IsNEJBQWlCO0FBQ2YsUUFBSUMsT0FBTyxJQUFYO0FBQ0NWLFVBQU1XLFlBQU4sQ0FBbUIsSUFBbkIsRUFBd0JDLFVBQXhCO0FBQ0MsYUFBU0EsVUFBVCxDQUFvQkMsR0FBcEIsRUFBeUJDLFNBQXpCLEVBQW1DO0FBQ3pCSixXQUFLTCxPQUFMLENBQWE7QUFDWEgscUJBQWFXLElBQUlaO0FBRE4sT0FBYjtBQUdUO0FBQ0osRztBQUNEYyxvQiw4QkFBb0JDLEssRUFBTztBQUN6QjtBQUNBLFFBQUlOLE9BQU8sSUFBWDtBQUNBO0FBQ0EsUUFBSU8sUUFBUUMsaUJBQVo7QUFDQSxRQUFJQyxXQUFXRixNQUFNQSxNQUFNRyxNQUFOLEdBQWUsQ0FBckIsQ0FBZjtBQUNDQyxZQUFRQyxHQUFSLENBQVlILFFBQVo7QUFDQSxRQUFJQSxZQUFZSSxTQUFaLElBQXVCSixTQUFTSyxLQUFULElBQWtCLHlCQUE3QyxFQUF3RTtBQUN2RSxVQUFJO0FBQ0ZDLFdBQUdDLGNBQUgsQ0FBa0IsV0FBbEIsRUFBK0JWLE1BQU1XLGFBQU4sQ0FBb0JDLE9BQXBCLENBQTRCQyxTQUEzRDtBQUNELE9BRkQsQ0FFRSxPQUFPQyxDQUFQLEVBQVUsQ0FFWDs7QUFFREwsU0FBR00sWUFBSDtBQUNELEtBUkEsTUFRTTtBQUNMTixTQUFHTyxVQUFILENBQWM7QUFDWEMsYUFBSyxpQ0FBaUNqQixNQUFNVyxhQUFOLENBQW9CQyxPQUFwQixDQUE0QkMsU0FBN0QsR0FBdUUsVUFBdkUsR0FBa0ZuQixLQUFLVCxJQUFMLENBQVVLO0FBRHRGLE9BQWQ7QUFHRDtBQUNGLEc7O0FBQ0Q0Qix5QkFBc0IsK0JBQVNsQixLQUFULEVBQWU7QUFDbkMsUUFBSU4sT0FBTyxJQUFYO0FBQ0VlLE9BQUdPLFVBQUgsQ0FBYztBQUNaQyxXQUFLLGlDQUFpQ2pCLE1BQU1XLGFBQU4sQ0FBb0JDLE9BQXBCLENBQTRCQyxTQUE3RCxHQUF1RSxVQUF2RSxHQUFrRm5CLEtBQUtULElBQUwsQ0FBVUs7QUFEckYsS0FBZDtBQUdILEc7QUFDRDZCLGUseUJBQWNuQixLLEVBQU07QUFDbEIsUUFBSU4sT0FBTyxJQUFYO0FBQ0FlLE9BQUdXLFNBQUgsQ0FBYTtBQUNYQyxhQUFPLEVBREk7QUFFWEMsZUFBUyxVQUZFO0FBR1hDLGVBQVMsaUJBQVUxQixHQUFWLEVBQWU7QUFDdEIsWUFBSUEsSUFBSTJCLE9BQVIsRUFBaUI7QUFHWDtBQUhXLGNBSUE1QixVQUpBLEdBSVQsU0FBU0EsVUFBVCxDQUFvQkMsR0FBcEIsRUFBeUJDLFNBQXpCLEVBQW1DLENBQ2xDLENBTFE7O0FBQ2hCLGNBQUllLFlBQVliLE1BQU15QixNQUFOLENBQWFiLE9BQWIsQ0FBcUJDLFNBQXJDO0FBQ0M3QixnQkFBTTBDLGFBQU4sQ0FBb0JiLFNBQXBCLEVBQThCakIsVUFBOUI7QUFJUUYsZUFBS0QsY0FBTDtBQUNIZ0IsYUFBR2tCLGFBQUgsQ0FBaUI7QUFDWkMsaUJBQUs7QUFETyxXQUFqQjtBQUlOO0FBQ0Y7QUFoQlUsS0FBYjtBQWtCQSxXQUFPLEtBQVA7QUFFRCxHOztBQUNEQyxVQUFRLGtCQUFZO0FBQ2xCO0FBQ0QsRztBQUNEQyxZQUFVLG9CQUFZO0FBQ3BCO0FBQ0QiLCJmaWxlIjoiYWRkcmVzcy53eHAiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgcGF0aGRzID0gIHJlcXVpcmUoXCIuLi8uLi91dGlscy9uYXZpZ2F0b3IuanNcIilcbnZhciBhcHAgPSBnZXRBcHAoKTtcbnZhciBkYWF0eSA9ICByZXF1aXJlKFwiLi4vLi4vdXRpbHMvYXBpMi5qc1wiKVxuZXhwb3J0IGRlZmF1bHQge1xuICBjb25maWc6IHtcbiAgICBuYXZpZ2F0aW9uQmFyVGl0bGVUZXh0OiAn5aGr5YaZ5Zyw5Z2AJyxcbiAgICB1c2luZ0NvbXBvbmVudHM6IHt9XG4gIH0sXG4gIGRhdGE6IHtcbiAgICBhZGRyZXNzTGlzdDogW10sXG4gIH0sXG4gIG9uTG9hZDogZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAvLyDpobXpnaLliJ3lp4vljJYgb3B0aW9uc+S4uumhtemdoui3s+i9rOaJgOW4puadpeeahOWPguaVsFxuICAgIC8vIGNvbnNvbGUubG9nKG9wdGlvbnMudXNlcklkLFwidXNlcklkXCIpXG4gICAgdGhpcy5zZXREYXRhKHtcbiAgICAgIHVzZXJJZDpvcHRpb25zLnVzZXJJZFxuICAgICAgLy8gdXNlcklkOlwiNWQ0N3RuZHM4djEwMDg0NDA4NTEwMDg2OTM2XCJcbiAgICB9KVxuICB9LFxuICBvblJlYWR5OiBmdW5jdGlvbiAoKSB7XG4gICAgLy8g6aG16Z2i5riy5p+T5a6M5oiQXG4gIH0sXG4gIG9uU2hvdzogZnVuY3Rpb24gKCkge1xuICAgIC8vIOmhtemdouaYvuekulxuICAgIHRoaXMuZ2V0QWRkcmVzc0xpc3QoKTtcbiAgfSxcbiAgZ2V0QWRkcmVzc0xpc3QgKCl7XG4gICAgbGV0IHRoYXQgPSB0aGlzO1xuICAgICBkYWF0eS5BZGRyZXNzTGlzdEwobnVsbCxzdWNjZXNzRmF5KVxuICAgICAgZnVuY3Rpb24gc3VjY2Vzc0ZheShyZXMsIHNvdXJjZU9iail7XG4gICAgICAgICAgICAgICAgdGhhdC5zZXREYXRhKHtcbiAgICAgICAgICAgICAgICAgIGFkZHJlc3NMaXN0OiByZXMuZGF0YVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgfVxuICB9LFxuICBhZGRyZXNzQWRkT3JVcGRhdGUgKGV2ZW50KSB7XG4gICAgLy8gY29uc29sZS5sb2coZXZlbnQpXG4gICAgbGV0IHRoYXQgPSB0aGlzO1xuICAgIC8v6L+U5Zue5LmL5YmN77yM5YWI5Y+W5Ye65LiK5LiA6aG15a+56LGh77yM5bm26K6+572uYWRkcmVzc0lkXG4gICAgdmFyIHBhZ2VzID0gZ2V0Q3VycmVudFBhZ2VzKCk7XG4gICAgdmFyIHByZXZQYWdlID0gcGFnZXNbcGFnZXMubGVuZ3RoIC0gMl07XG4gICAgIGNvbnNvbGUubG9nKHByZXZQYWdlKVxuICAgICBpZiAocHJldlBhZ2UgIT0gdW5kZWZpbmVkJiZwcmV2UGFnZS5yb3V0ZSA9PSBcInBhZ2VzL2NoZWNrb3V0L2NoZWNrb3V0XCIpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHd4LnNldFN0b3JhZ2VTeW5jKCdhZGRyZXNzSWQnLCBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuYWRkcmVzc0lkKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcblxuICAgICAgfVxuXG4gICAgICB3eC5uYXZpZ2F0ZUJhY2soKTtcbiAgICB9IGVsc2Uge1xuICAgICAgd3gubmF2aWdhdGVUbyh7XG4gICAgICAgICB1cmw6ICcuLi9hZGRyZXNzQWRkL2FkZHJlc3NBZGQ/aWQ9JyArIGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5hZGRyZXNzSWQrXCImdXNlcklkPVwiK3RoYXQuZGF0YS51c2VySWRcbiAgICAgIH0pXG4gICAgfVxuICB9LFxuICBuZXdBZGRyZXNzQWRkT3JVcGRhdGU6ZnVuY3Rpb24oZXZlbnQpe1xuICAgIGxldCB0aGF0ID0gdGhpcztcbiAgICAgIHd4Lm5hdmlnYXRlVG8oe1xuICAgICAgICB1cmw6ICcuLi9hZGRyZXNzQWRkL2FkZHJlc3NBZGQ/aWQ9JyArIGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5hZGRyZXNzSWQrXCImdXNlcklkPVwiK3RoYXQuZGF0YS51c2VySWRcbiAgICAgIH0pXG4gIH0sXG4gIGRlbGV0ZUFkZHJlc3MoZXZlbnQpe1xuICAgIGxldCB0aGF0ID0gdGhpcztcbiAgICB3eC5zaG93TW9kYWwoe1xuICAgICAgdGl0bGU6ICcnLFxuICAgICAgY29udGVudDogJ+ehruWumuimgeWIoOmZpOWcsOWdgO+8nycsXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgIGlmIChyZXMuY29uZmlybSkge1xuICAgICAgICAgbGV0IGFkZHJlc3NJZCA9IGV2ZW50LnRhcmdldC5kYXRhc2V0LmFkZHJlc3NJZDtcbiAgICAgICAgICBkYWF0eS5BZGRyZXNzRGVsZXRlKGFkZHJlc3NJZCxzdWNjZXNzRmF5KVxuICAgICAgICAgICAgICAvLyAgY29uc29sZS5sb2coMTExMTIyMjIpXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gc3VjY2Vzc0ZheShyZXMsIHNvdXJjZU9iail7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgdGhhdC5nZXRBZGRyZXNzTGlzdCgpO1xuICAgICAgICAgICAgICAgd3gucmVtb3ZlU3RvcmFnZSh7XG4gICAgICAgICAgICAgICAgICAgIGtleTogJ2FkZHJlc3NJZCcsXG4gICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICAgIHJldHVybiBmYWxzZTtcbiAgICBcbiAgfSxcbiAgb25IaWRlOiBmdW5jdGlvbiAoKSB7XG4gICAgLy8g6aG16Z2i6ZqQ6JePXG4gIH0sXG4gIG9uVW5sb2FkOiBmdW5jdGlvbiAoKSB7XG4gICAgLy8g6aG16Z2i5YWz6ZetXG4gIH1cbn0iXX0=